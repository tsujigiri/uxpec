describe "uxpec/roll-back-stack 00
	it "restores 20 "last 20 "stack 20 "snapshot 00
		assert/stack-empty

		;uxpec/stack-stack STH2
		LIT "d STH2kr STA INC2r
		LIT "a STH2kr STA INC2r
		LIT "t STH2kr STA INC2r
		LIT "a STH2kr STA INC2r
		#04 STH2r STAk
		;uxpec/stack-stack-ptr STA2
		POP

		assert/stack-empty

		uxpec/roll-back-stack

		LIT "a LIT "d assert/equ2
		LIT "a LIT "t assert/equ2

		;uxpec/stack-stack-ptr LDA2 #0000 assert/equ2

		assert/stack-empty
	end

	it "restores 20 "multiple 20 "stacks 00
		assert/stack-empty

		;uxpec/stack-stack STH2
		LIT "d STH2kr STA INC2r ( 64 )
		LIT "a STH2kr STA INC2r ( 61 )
		#02 STH2kr STA INC2r
		LIT "t STH2kr STA INC2r ( 74 )
		LIT "a STH2kr STA INC2r ( 61 )
		LIT "s STH2kr STA INC2r ( 73 )
		#03 STH2r STAk
		;uxpec/stack-stack-ptr STA2
		POP

		assert/stack-empty

		uxpec/roll-back-stack

		LIT "t assert/equ
		LIT "a assert/equ
		LIT "s assert/equ

		assert/stack-empty

		;uxpec/stack-stack #0002 ADD2 ;uxpec/stack-stack-ptr LDA2 assert/equ2

		uxpec/roll-back-stack

		LIT "d assert/equ
		LIT "a assert/equ

		;uxpec/stack-stack-ptr LDA2 #0000 assert/equ2
		assert/stack-empty
	end
end
